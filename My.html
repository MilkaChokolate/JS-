<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script>
//1.Простейший пример рекурсии
function pow(x, n) {
  if (n == 1) {
    return x;
  } else {
    return x * pow(x, n - 1);
  }
}


function sumTo1(n){
    let sum = 0;
    for (let i = 0; i <= n; i++){
        sum += i;
    }
    return sum;
}//Вариант с циклом

function sumTo2(n) {
    return (n === 1) ? n : n + sumTo2(n-1);
}//Вариант с рекурсией

function sumTo3(n){
   return (n*(n+1/2));
}//Вариант с формулой

    
let clone = Object.defineProperties({}, Object.getOwnPropertyDescriptors(obj));//3.Создать клон объекта с флагами


    
function delay(f, ms) {
  return function() {
    setTimeout(() => f.apply(this, arguments), ms);
  };
}
let f1000 = delay(alert, 1000);
f1000("test");//4.Создайте декоратор delay(f, ms), который задерживает каждый вызов f на ms миллисекунд.
    
    
function askPassword(ok, fail) {
  let password = prompt("Password?", '');
  if (password == "rockstar") ok();
  else fail();
}
let user = {
  name: 'Вася',
  loginOk() {
    alert(`${this.name} logged in`);
  },
  loginFail() {
    alert(`${this.name} failed to log in`);
  },
};
askPassword(user.loginOk, user.loginFail);//5.Вызов askPassword() в приведённом ниже коде должен проверить пароль и затем вызвать user.loginOk/loginFail в зависимости от ответа.
    
    
let animal = {
  eats: true
};

// создаём новый объект с прототипом animal
let rabbit = Object.create(animal);
alert(rabbit.eats); // true
alert(Object.getPrototypeOf(rabbit) === animal); // получаем прототип объекта rabbit
Object.setPrototypeOf(rabbit, {}); // заменяем прототип объекта rabbit на {}
    //6.Современные способы создания прототипов.
    
    
let json = '{ "age": 30 }'; // данные неполны
try {
  let user = JSON.parse(json);
  if (!user.name) {
    throw new SyntaxError("Данные неполны: нет имени");
  }
  blabla(); // неожиданная ошибка
  alert( user.name );
} catch(e) {
  if (e.name == "SyntaxError") {
    alert( "JSON Error: " + e.message );
  } else {
    throw e; // проброс (*)
  }//6.Сднлать проброс ошибки

    
// Запрашиваем user.json
fetch('/article/promise-chaining/user.json')
  // Загружаем данные в формате json
  .then(response => response.json())
  // Делаем запрос к GitHub
  .then(user => fetch(`https://api.github.com/users/${user.name}`))
  // Загружаем ответ в формате json
  .then(response => response.json())
  // Показываем аватар (githubUser.avatar_url) в течение 3 секунд (возможно, с анимацией)
  .then(githubUser => {
    let img = document.createElement('img');
    img.src = githubUser.avatar_url;
    img.className = "promise-avatar-example";
    document.body.append(img);

    setTimeout(() => img.remove(), 3000); // (*)
  });//7.Пример fetch запроса на промисах
    
    
    
    
     function printerError(s) {
        let result = s.match(/[^a-m]/g).length + '/' + s.length;
        return result
    }//8. Вывести количество бутв вне диапозона a-m деленое на количество букв в строке
    
    
     function duplicateEncode(word){
        let arrOfChar = word.toLowerCase().split('');
        let arr = [];
        arr.push(arrOfChar[0]);
        let arrOfDuplicate = [];
        let result = '';
        for (let i = 1; i < arrOfChar.length; i++){
            if (arr.includes(arrOfChar[i])){
                arrOfDuplicate.push(arrOfChar[i])
            } else {
                arr.push(arrOfChar[i])
            }
        }
        for (let j = 0; j < arrOfChar.length; j++){
            if (arrOfDuplicate.includes(arrOfChar[j])){
                result += ')'
            } else {
                result += '('
            }
        }
        return result;
    }

    console.log(duplicateEncode("aab"))//9.Заменить символы в строке на ), если символ повтроряющийся и (, если нет (регистр не учитавыется)
    
    
    function isPangram(string){
        let setOfChar = new Set(string.toLowerCase().match(/[a-z]/g))
        return setOfChar.size === 26 ? true : false
    }//10.Проверить, является ли строка панграммой
    
    
    
 function changer(str) {
    let newArr = Array.from(str);
    let alphabet = ['Z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y']
    
    for (let i = 0; i < newArr.length; i++){
        if (alphabet.includes(newArr[i])){
            newArr.splice(i, 1, alphabet[alphabet.indexOf(newArr[i])+1])
        }
    }
    for (let i = 0; i < newArr.length; i++){
        if(/[a e i o u]/.test(newArr[i])){
            newArr.splice(i, 1, newArr[i].toUpperCase());
        }
        else {
            newArr.splice(i, 1, newArr[i].toLowerCase());
        }
    }
    return newArr.join('')
}
console.log(changer('Cat30'))
console.log(changer('Alice'))

</script>
<body>
</body>

</html>
